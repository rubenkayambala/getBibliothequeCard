{% extends './base.html' %}
{% block content %}
        <main>
            <div class="container mt-4">
                
                <div id="the-card" class="card-container mb-4">
                    <div class="row h-100 m-0">
                        <div class="col-6 left-side p-2 text-center">
                        </div>
                        <div class="col-6 right-side pt-3">
                        </div>
                        <div class="logo-container">
                            <img src="/static/img/logo-medecine.png" width="100" alt="">
                        </div>
                        <div class="row w-100 h-100 m-0 position-absolute text-container">
                            <div class="col-6 p-2 text-center">
                                <h5 class="m-0" style="font-size: 0.7rem;">REPUBLIQUE DEMOCRATIQUE DU CONGO</h5>
                                <p class="my-0" style="font-size: 0.5rem;">MINISTERE DE L'ENSEIGNEMENT SUPERIEURE ET UNIVERSITAIRE</p>
                                <h2 style="font-size: 1rem;">UNIVERSITE DE KINSHASA</h2>
                                <img src="/static/img/unikin.png" alt="unikin" width="40" height="40"> <br>
                                <img src="{{user.photo.url}}" alt="picture" width="100" height="100" style="float: left; margin-top: 20px; margin-left: 20px; object-fit: cover;">
                            </div>
    
                            <div class="col-6 pt-3">
                                <div class="d-flex flex-column align-items-center">
                                    <h6 class="text-white mb-1">{{user.nom}} {{user.postnom}}</h6>
                                    <span class="text-white">{{user.prenom}}</span>
                                    <hr class="mt-2 mb-1" style="height: 2px; width: 100px; background-color: rgb(248, 211, 0); opacity: 1; border-radius: 10px;">
                                    <span class="text-white">Ã©tudiant</span>
                                    <img src="{{user.qr_code.url}}" width="80" alt="qr_code">
                                </div>
                                <div class="d-block" style="margin-left: 17px; margin-top: 6px;">
                                    <strong class="text-white mb-1">Grade/Promotion : </strong> <span class="text-white">{{user.promotion}}</span> <br>
                                    <strong class="text-white mb-1">Dept./Filiaire : </strong> <span class="text-white">{{user.filiere}}</span> <br>
                                    <span class="text-white">{{user.telephone}}</span> <br>
                                    <span class="text-white">{{user.email}}</span> <br>
                                </div>
                            </div>
                        </div>

                        <div class="items">
                            <div class="item1"></div>
                            <div class="item2">
                                <i class="fa fa-phone-volume text-white d-block mb-1" style="font-size: 1.2rem;"></i>
                                <i class="fa fa-at text-white d-block mb-2" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="download-btn" class="btn btn-success mb-4">Imprimer</button>
            </div>
        </main>

        <script>
            let btn = document.getElementById('download-btn');
            btn.addEventListener('click', function(){
                const screenTarget = document.getElementById('the-card');
                html2canvas(screenTarget).then((canvas)=>{
                    const base64image = canvas.toDataURL('image/png');
                    var anchor = document.createElement('a');
                    anchor.setAttribute('href', base64image)
                    anchor.setAttribute('download', 'mycard.png');
                    anchor.click();
                    anchor.remove();
                })
            })
        </script>
{% endblock %}
